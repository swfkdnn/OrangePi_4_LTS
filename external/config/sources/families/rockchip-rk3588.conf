source "${BASH_SOURCE%/*}/include/rockchip64_common.inc"

OVERLAY_PREFIX='rk3588'
BOOTDELAY=0

CPUMIN=408000
CPUMAX=2400000

case $BRANCH in

	legacy)

		BOOTBRANCH='branch:v2017.09-rk3588'
		UBOOT_COMPILER="aarch64-linux-gnu-"
		UBOOT_USE_GCC='< 8.0'

		KERNELBRANCH='branch:orange-pi-5.10-rk3588'
		KERNELPATCHDIR='rockchip-rk3588-legacy'

		;;

esac

prepare_boot_configuration

family_tweaks_bsp() {

	install -m 755 $EXTER/packages/bsp/adb/adbd-${ARCH} ${destination}/usr/bin/adbd
}

family_tweaks_s() {

	rsync -a "${EXTER}"/packages/bsp/rk3588/* ${SDCARD}/

	# enable additional services
	chroot "${SDCARD}" /bin/bash -c "systemctl --no-reload enable usbdevice.service >/dev/null 2>&1"

	install_deb_chroot "$EXTER/cache/debs/arm64/wiringpi_2.46.deb"

	chroot $SDCARD /bin/bash -c "apt-get -y -qq install lm-sensors vlc" >/dev/null 2>&1
	chroot $SDCARD /bin/bash -c "rm /etc/profile.d/im-config_wayland.sh" >/dev/null 2>&1

	sed "s/^SIZE=.*/SIZE=200M/" -i "${SDCARD}"/etc/default/orangepi-ramlog

	#install_docker
}
